INCLUDE(FindProtobuf)
FIND_PACKAGE(Protobuf 3.6 REQUIRED)
INCLUDE_DIRECTORIES(${PROTOBUF_INCLUDE_DIR} ${Protobuf_INCLUDE_DIRS})

FILE(GLOB AUTOGENERATED_SRCS "autogenerated/foxglove/*")

add_library(
    pointcloud_proto_lib
    ${AUTOGENERATED_SRCS}
)
target_link_libraries(pointcloud_proto_lib ${PROTOBUF_LIBRARY})
target_include_directories(pointcloud_proto_lib PUBLIC autogenerated)

add_executable(protobuf_pointcloud_writer protobuf_pointcloud_writer.cpp)
target_link_libraries(protobuf_pointcloud_writer ${CONAN_LIBS} pointcloud_proto_lib)